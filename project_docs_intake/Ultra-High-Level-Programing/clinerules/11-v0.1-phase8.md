# Suggested .clinerules Additions for Phase 8

## Testing Standards
*   All new Workflow definitions (`workflows/*.yaml`) require at least one corresponding integration test in `tests/workflows/` covering the primary success path and key failure branches.
*   The JIT Optimization cycle MUST be covered by integration tests verifying the flow including test execution and conditional state updates (`test_oracle_integration.py`).
*   New internal HTTP API endpoints MUST have corresponding integration tests (`tests/core/routing/` or similar).

## Security Implementation
*   The `check_permission` function in `@core/security/auth.py` MUST NOT just return True; implement logic based on `SecurityConfig`.
*   Authentication context (`user_context`) MUST be populated in requests handled by Admin APIs (`@core/routing/request_router.py`) and MCP requests (`@mcp_servers/core/server.py`). Add `# TODO: Implement Authentication` where needed.
*   Review all MCP tool handlers (`@mcp_servers/core/server.py`) for rigorous input validation (`params`), especially those interacting with external systems or state. Add validation using `jsonschema` library where missing.

## Documentation
*   All internal and external HTTP APIs MUST be documented using OpenAPI 3.x specifications stored in `@docs/api/`. Keep specifications updated alongside code changes.
*   Ensure primary design documents (`.design-docs/*`) are updated to reflect implementation details completed in Phases 1-7.